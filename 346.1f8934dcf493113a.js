"use strict";(self.webpackChunkeprofile=self.webpackChunkeprofile||[]).push([[346],{6346:(R,h,a)=>{a.r(h),a.d(h,{AuthModule:()=>q});var m=a(6895),l=a(9299),c=a(727),r=a(4006),w=a(5656),_=a(6289),e=a(4650),u=a(2689),p=a(2858),f=a(4060),g=a(1572);const C=["passwordInput"],y=["loginButton"];function x(t,s){1&t&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"mat-progress-spinner",22),e.qZA()())}function Z(t,s){1&t&&(e.TgZ(0,"div",23)(1,"strong"),e._uU(2,"Error: "),e.qZA(),e._uU(3," Please enter correct email/password "),e._UZ(4,"button",24),e.qZA())}const v=function(){return["/"]},k=function(){return["/confirm-email"]};let T=(()=>{class t{constructor(o,n,i,d){this.formBuilder=o,this.authServ=n,this.validationMessagesService=i,this.router=d,this.submitted=!1,this.error=!1,this.showPassword=!1,this.showConfirmPassword=!1,this.subscription=new c.w0}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.formBuilder.group({email:["",r.kI.required],password:["",r.kI.required]}),this.email=this.loginForm.controls.email,this.password=this.loginForm.controls.password}submit(){this.loginForm.valid?(this.submitted=!0,this.subscription.add(this.authServ.login(this.loginForm.value).subscribe({next:o=>{sessionStorage.setItem("token",o.access),(0,w.o)(o.access).role===_.G.staff_member?this.router.navigateByUrl("/panel/notifications"):this.router.navigateByUrl("/panel/profile"),this.submitted=!1,this.error=!1},error:o=>{this.password.reset(),this.submitted=!1,this.error=!0},complete:()=>{this.submitted=!1}}))):this.validationMessagesService.validateAllFormFields(this.loginForm)}moveToPassword(){this.passwordInput.nativeElement.focus()}submitLogin(){this.loginButton.nativeElement.click()}togglePasswordVisibility(){this.showPassword=!this.showPassword}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(u.e),e.Y36(p.J),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],viewQuery:function(o,n){if(1&o&&(e.Gf(C,5),e.Gf(y,5)),2&o){let i;e.iGM(i=e.CRH())&&(n.passwordInput=i.first),e.iGM(i=e.CRH())&&(n.loginButton=i.first)}},decls:28,vars:14,consts:[[1,"container","py-5"],[1,"row","py-5","align-items-center","justify-content-center"],[1,"col-md-6"],[1,"card","shadow"],["class","overlay",4,"ngIf"],[1,"logo","d-flex","justify-content-center",3,"routerLink"],["src","assets/landing-page/logo.svg","alt","","srcset",""],[1,"fw-bold"],["class","alert alert-danger alert-dismissible fade show d-flex align-items-center mx-md-3","role","alert",4,"ngIf"],[1,"row","px-3","mt-3"],[1,"col-12","mb-3"],["fieldName","email",3,"maxLength","type","control","keydown.enter"],["emailInput",""],[1,"relative"],["id","password-field","fieldName","password",3,"control","type","maxLength","keydown.enter"],["passwordInput",""],[1,"col-12","text-center","d-flex","flex-column"],["type","submit",1,"mx-5","mb-2",3,"click"],["loginButton",""],[3,"routerLink"],[1,"overlay"],[1,"center"],["diameter","70","mode","indeterminate","color","[primary]"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","d-flex","align-items-center","mx-md-3"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,x,3,0,"div",4),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"h1",7),e._uU(8,"Login"),e.qZA(),e.YNc(9,Z,5,0,"div",8),e.TgZ(10,"form")(11,"div",9)(12,"div",10)(13,"app-input-text",11,12),e.NdJ("keydown.enter",function(){return n.moveToPassword()}),e.qZA()(),e.TgZ(15,"div",10)(16,"div")(17,"div",13)(18,"app-input-text",14,15),e.NdJ("keydown.enter",function(){return n.submitLogin()}),e.qZA()()()()()(),e.TgZ(20,"div",16)(21,"button",17,18),e.NdJ("click",function(){return n.submit()}),e._uU(23,"Login"),e.qZA(),e.TgZ(24,"a",19),e._uU(25,"Forget Password ?"),e.qZA(),e.TgZ(26,"a",19),e._uU(27,"Back To Home ?"),e.qZA()()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.submitted),e.xp6(1),e.Q6J("routerLink",e.DdM(11,v)),e.xp6(4),e.Q6J("ngIf",n.error),e.xp6(4),e.Q6J("maxLength",150)("type","text")("control",n.email),e.xp6(5),e.Q6J("control",n.password)("type",n.showPassword?"text":"password")("maxLength",50),e.xp6(6),e.Q6J("routerLink",e.DdM(12,k)),e.xp6(2),e.Q6J("routerLink",e.DdM(13,v)))},dependencies:[m.O5,l.rH,l.yS,f.m,g.Ou,r._Y,r.JL,r.F],styles:[".card[_ngcontent-%COMP%]{padding:20px;border-radius:15px}h1[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{background-color:#566040;color:#fff;padding:10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#535f38}"]}),t})();var b=a(1245);const P=["submitButton"];function L(t,s){1&t&&(e.TgZ(0,"div",17)(1,"div",18),e._UZ(2,"mat-progress-spinner",19),e.qZA()())}function A(t,s){1&t&&(e.TgZ(0,"div",20)(1,"strong"),e._uU(2,"Error: "),e.qZA(),e._uU(3," Something Error !! "),e._UZ(4,"button",21),e.qZA())}const M=function(){return["/"]},J=["submitButton"];function I(t,s){1&t&&(e.TgZ(0,"div",16)(1,"div",17),e._UZ(2,"mat-progress-spinner",18),e.qZA()())}function U(t,s){1&t&&(e.TgZ(0,"div",19)(1,"strong"),e._uU(2,"Error: "),e.qZA(),e._uU(3," Please enter correct email "),e._UZ(4,"button",20),e.qZA())}const B=function(){return["/"]},S=function(){return["/login"]},O=[{path:"login",component:T},{path:"confirm-password",component:(()=>{class t{constructor(o,n,i,d,N,E){this.formBuilder=o,this.authServ=n,this.validationMessagesService=i,this.router=d,this.activatedRoute=N,this.messageService=E,this.subscription=new c.w0,this.submitted=!1,this.error=!1,this.showPassword=!1,this.showConfirmPassword=!1}ngOnInit(){this.initForm(),this.subscription.add(this.activatedRoute.queryParams.subscribe(o=>{this.token=o.token,this.resetForm.controls.token.patchValue(this.token)}))}initForm(){this.resetForm=this.formBuilder.group({confirm_password:["",r.kI.required],new_password:["",r.kI.required],token:["",r.kI.required]}),this.confirm_password=this.resetForm.controls.confirm_password,this.new_password=this.resetForm.controls.new_password}submit(){this.resetForm.valid&&this.token?(this.submitted=!0,this.subscription.add(this.authServ.resetPassword(this.resetForm.value,this.token).subscribe({next:o=>{this.messageService.showSuccess("Password updated successfully"),this.router.navigateByUrl("/login"),this.submitted=!1,this.error=!1},error:o=>{this.new_password.reset(),this.submitted=!1,this.error=!0},complete:()=>{this.submitted=!1}}))):this.validationMessagesService.validateAllFormFields(this.resetForm)}submitConfirm(){this.submitButton.nativeElement.click()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(u.e),e.Y36(p.J),e.Y36(l.F0),e.Y36(l.gz),e.Y36(b.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-confirm-password"]],viewQuery:function(o,n){if(1&o&&e.Gf(P,5),2&o){let i;e.iGM(i=e.CRH())&&(n.submitButton=i.first)}},decls:24,vars:10,consts:[[1,"container","py-5"],[1,"row","py-5","aign-items-center","justify-content-center"],[1,"col-md-6"],[1,"card","shadow"],["class","overlay",4,"ngIf"],[1,"logo","d-flex","justify-content-center",3,"routerLink"],["src","assets/landing-page/logo.svg","alt","","srcset",""],[1,"fw-bold"],["class","alert alert-danger alert-dismissible fade show d-flex align-items-center mx-md-3","role","alert",4,"ngIf"],[1,"row","px-3","mt-3"],[1,"col-12","mb-3"],[1,"relative"],["id","password-field","fieldName","New Password",3,"control","type","maxLength"],["id","confirm-password-field","fieldName","Confirm Password",3,"control","type","maxLength","keydown.enter"],[1,"col-12","text-center","d-flex","flex-column"],["type","submit",1,"mx-5","mb-2",3,"click"],["submitButton",""],[1,"overlay"],[1,"center"],["diameter","70","mode","indeterminate","color","[primary]"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","d-flex","align-items-center","mx-md-3"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,L,3,0,"div",4),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"h1",7),e._uU(8,"Confirm Password"),e.qZA(),e.YNc(9,A,5,0,"div",8),e.TgZ(10,"form")(11,"div",9)(12,"div",10)(13,"div")(14,"div",11),e._UZ(15,"app-input-text",12),e.qZA()()(),e.TgZ(16,"div",10)(17,"div")(18,"div",11)(19,"app-input-text",13),e.NdJ("keydown.enter",function(){return n.submitConfirm()}),e.qZA()()()()()(),e.TgZ(20,"div",14)(21,"button",15,16),e.NdJ("click",function(){return n.submit()}),e._uU(23,"Confirm"),e.qZA()()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.submitted),e.xp6(1),e.Q6J("routerLink",e.DdM(9,M)),e.xp6(4),e.Q6J("ngIf",n.error),e.xp6(6),e.Q6J("control",n.new_password)("type",n.showPassword?"text":"password")("maxLength",50),e.xp6(4),e.Q6J("control",n.confirm_password)("type",n.showPassword?"text":"password")("maxLength",50))},dependencies:[m.O5,l.rH,f.m,g.Ou,r._Y,r.JL,r.F],styles:[".card[_ngcontent-%COMP%]{padding:20px;border-radius:15px}h1[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{background-color:#566040;color:#fff;padding:10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#535f38}"]}),t})()},{path:"confirm-email",component:(()=>{class t{constructor(o,n,i,d){this.authServ=o,this.validationMessagesService=n,this.router=i,this.messageService=d,this.email=new r.NI("",r.kI.required),this.submitted=!1,this.error=!1,this.showPassword=!1,this.showConfirmPassword=!1,this.subscription=new c.w0}ngOnInit(){}submit(){this.email.valid?(this.submitted=!0,this.subscription.add(this.authServ.requestPasswordReset({email:this.email.value}).subscribe({next:o=>{this.messageService.showInfo("Please check email that sent to your account"),this.submitted=!1,this.error=!1},error:o=>{this.submitted=!1,this.error=!0},complete:()=>{this.submitted=!1}}))):this.validationMessagesService.validateFormControl(this.email)}submitConfirm(){this.submitButton.nativeElement.click()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(u.e),e.Y36(p.J),e.Y36(l.F0),e.Y36(b.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-confirm-email"]],viewQuery:function(o,n){if(1&o&&e.Gf(J,5),2&o){let i;e.iGM(i=e.CRH())&&(n.submitButton=i.first)}},decls:20,vars:9,consts:[[1,"container","py-5","mt-5"],[1,"row","py-5","aign-items-center","justify-content-center"],[1,"col-md-6"],[1,"card","shadow"],["class","overlay",4,"ngIf"],[1,"logo","d-flex","justify-content-center",3,"routerLink"],["src","assets/landing-page/logo.svg","alt","","srcset",""],[1,"fw-bold"],["class","alert alert-danger alert-dismissible fade show d-flex align-items-center mx-md-3","role","alert",4,"ngIf"],[1,"row","px-3","mt-3"],[1,"col-12","mb-3"],["fieldName","email",3,"maxLength","type","control","keydown.enter"],[1,"col-12","text-center","d-flex","flex-column"],["type","submit",1,"mx-5","mb-2",3,"click"],["submitButton",""],[3,"routerLink"],[1,"overlay"],[1,"center"],["diameter","70","mode","indeterminate","color","[primary]"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","d-flex","align-items-center","mx-md-3"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,I,3,0,"div",4),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"h1",7),e._uU(8,"Confirm Email"),e.qZA(),e.YNc(9,U,5,0,"div",8),e.TgZ(10,"form")(11,"div",9)(12,"div",10)(13,"app-input-text",11),e.NdJ("keydown.enter",function(){return n.submitConfirm()}),e.qZA()()()(),e.TgZ(14,"div",12)(15,"button",13,14),e.NdJ("click",function(){return n.submit()}),e._uU(17,"send"),e.qZA(),e.TgZ(18,"a",15),e._uU(19,"Back To Login?"),e.qZA()()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.submitted),e.xp6(1),e.Q6J("routerLink",e.DdM(7,B)),e.xp6(4),e.Q6J("ngIf",n.error),e.xp6(4),e.Q6J("maxLength",150)("type","text")("control",n.email),e.xp6(5),e.Q6J("routerLink",e.DdM(8,S)))},dependencies:[m.O5,l.rH,l.yS,f.m,g.Ou,r._Y,r.JL,r.F],styles:[".card[_ngcontent-%COMP%]{padding:20px;border-radius:15px}h1[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{background-color:#566040;color:#fff;padding:10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#535f38}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(O),l.Bz]}),t})();var Y=a(4466);let q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,Q,Y.m]}),t})()}}]);